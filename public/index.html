<html>
  <head>
    <link href="/styles/login.css" rel="stylesheet" type="text/css">
     <script src="https://code.jquery.com/jquery-latest.min.js"></script>
    <script src="https://aframe.io/releases/0.7.0/aframe.min.js"></script>
    <script
      src="https://code.jquery.com/ui/1.12.0/jquery-ui.min.js"
      integrity="sha256-eGE6blurk5sHj+rmkfsGYeKyZx3M4bG+ZlFyA7Kns7E="
      crossorigin="anonymous"></script>  
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/cupertino/jquery-ui.css" />
  </head>
  <body>
    
      <div class="form draggable">
        <div class="bar"></div>
        <form class="login-form noselect" method="GET">
          <input id="url" type="text" name="room" name2="URL: " placeholder="any website" required/>
<!--           <input id="name" type="text" name="username" name2="USER: " placeholder="name*" required/> -->
          <button class="vr" formaction="/vr.html">VR Experience</button>
          <button class="ar" formaction="/ar.html">AR Experience</button>  
        </form>
      </div>
      <div class="window draggable">
        <div class="bar"></div>
              <section class="aframe">
              <a-scene vr-mode-ui="enabled: false">
              <a-entity position="0 5 8" >
                <a-camera position="-14.977794259804254 17.2 -14.356310644443116" rotation="-45.17507149287806 -6.0713784621071945 0"></a-camera>
              </a-entity>
              <a-entity rotation="0 45 0">
                
                 <a-entity id="cubeUnit" position="-10 12 -40">
                  </a-entity>
              </a-entity>

              <a-entity light="color: #ffffff; intensity: .075; type: ambient;" visible=""></a-entity>
              <a-entity type="point" light="color: #ffffff; intensity: 0.5;decay:0.7" position="-10 10 0"></a-entity>
            </a-scene>
        </section>
      </div>
    <div class="window desc draggable">
        <div class="bar"></div>
        <div class="block">
          VR-Browser is a platform that allows users to explore virtual environments generated from live websites. 
          Users visiting the same website will be able to interact and chat with each other. 
          <br><br>
          VR-Browser also offers an AR experience for those who do not wish to interact with other users.
          Users are given a top down view of the world and the other players on the map.
          To use AR, please print out a <a class="hiro tooltip" target="blank" title="" href="https://cdn.glitch.com/8e89a415-8efd-4e1f-b54d-2e11c0220be9%2Fhiro.png?1525975912251">
          <img class="tooltiptext" src="https://cdn.glitch.com/8e89a415-8efd-4e1f-b54d-2e11c0220be9%2Fhiro.png?1525975912251"/>
          Hiro Marker</a> and show it to the webcam.  
          We are working to towards a markerless version in the future.
        </div>    
      </div>
    <div class="ghost">
      <input id="url-ghost" placeholder=""/>
      <input id="name-ghost" placeholder=""/>
    </div>
    <script>
      // A test string
// RegExp literal which matches http:// or HTTP:// at the beginning of a string
// An unwanted beginning
      var beginsHTTP = /^https?\:\/\//i

      // Javascript using onchange property on element
      document.getElementById('url').onchange = function () {
          // using this which points to the element
          this.value = this.value.replace(beginsHTTP, '');
      };
      
      $('.draggable').draggable({
          handle: '.bar',
          appendTo: 'body',
          start: function(event, ui) {
              isDraggingMedia = true;
          },
          stop: function(event, ui) {
              isDraggingMedia = false;
          }
      });
      
      // $( ".hiro" ).tooltip({ content: '<img src="https://cdn.glitch.com/8e89a415-8efd-4e1f-b54d-2e11c0220be9%2Fhiro.png?1525975912251"/>' });

      $('input').each(function(i, obj) {
          $(obj).bind('keyup', function(event) {

         if($.trim($('#url').val()) !== ''){
        $('button').addClass('ready')
     }else{
       $('button').removeClass('ready')
      }
          });
    });

    
      var width = 20;
      var height = 20;
      for (let z = 0; z < width; z ++) {
        for (let x = 0; x < height; x ++) {
          var a = x-(width/2);
          var b = z-(height/2);
          var c = Math.sqrt( a*a + b*b );
          var scene = document.querySelector('#cubeUnit');
          var cube = document.createElement('a-box');
          let h = (Math.sin(c)+1)/2;
          // console.log(h)
          cube.setAttribute('position', {
                              x: (x*1),
                              y: 0,
                              z: (z*1)
                            });
          let d = c;
          // cube.setAttribute('height', 1+h);
          cube.setAttribute('id', 'x_'+x+'y_'+z);
          // cube.setAttribute('metalness', '0.6');

          // cube.setAttribute('material','wireframe:true')
          // cube.setAttribute('color', 'rgb('+Math.floor(h*255)+','+Math.floor(h*255)+','+Math.floor(h*255)+')');
          scene.appendChild(cube);
        }
      }

    var t = 0;
function render() {
  t -= 0.01;
  requestAnimationFrame(render);
  for (let z = 0; z < width; z ++) {
        for (let x = 0; x < height; x ++) {
          var a = x-(width/2);
          var b = z-(height/2);
          var c = Math.sqrt( a*a + b*b );
          var offset = (Math.sin(t*5+c)+1)/2
          var box = document.querySelector('#x_'+x+'y_'+z)
          box.setAttribute('height', 1 + offset * 6);
          // box.setAttribute('coender();
        }
  }
}
      render()

    </script>
  </body>
</html>